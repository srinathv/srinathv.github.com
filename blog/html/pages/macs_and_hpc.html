<!DOCTYPE html><!--[if lt IE 7]>      <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="description" content="My blog">
        <meta name="viewport" content="width=device-width">
        <title>Macs and High Performance Computing &mdash; Psuedoneuromancer&#39;s scientific tool chest.</title>
            <link rel="stylesheet" href="../_static/normalize.css" type="text/css">
            <link rel="stylesheet" href="../_static/sphinx.css" type="text/css">
            <link rel="stylesheet" href="../_static/main.css" type="text/css">
            <link rel="stylesheet" href="../_static/modern5.css" type="text/css">
            <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
            <link rel="stylesheet" href="../_static/font-awesome.min.css" type="text/css">
        <!-- Load modernizr and JQuery -->
        <script src="../_static/vendor/modernizr-2.6.2.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="../_static/vendor/jquery-1.8.2.min.js"><\/script>')</script>
        <script src="../_static/plugins.js"></script>
        <script src="../_static/main.js"></script>
        <link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.html" /><script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script><script type="text/javascript" src="../_static/underscore.js"></script><script type="text/javascript" src="../_static/doctools.js"></script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            // Adjusts document height if sidebar is taller
            var documentwrapper = document.getElementsByTagName("article")[0];
            var sidebar = document.getElementsByClassName("sidebar")[0];

            if (sidebar.offsetHeight > documentwrapper.offsetHeight)
            {
                var mainwrapper = document.getElementsByClassName("main")[0];
                documentwrapper.style.minHeight = mainwrapper.offsetHeight + "px";
            }

            // Scroll to content if on small screen
            if (screen.width < 480)
            {
                $(document).scrollTop(document.getElementsByTagName("article")[0].offsetTop - 44);
            }
        });
    </script></head>
    <body role="document">
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

      <div id="container"><header role="banner">
            <hgroup>
              <h1><a href="../index.html">Psuedoneuromancer&#39;s scientific tool chest.</a></h1><h2>Things that help Srinath Vadlamani explore science and mathematics.</h2></hgroup>
          </header>
      <nav role="navigation">
            <ul><li class="quicklink"><div class="rss">
        <a href="../rss.html" title="Subscribe via RSS"><span class="fa fa-lg fa-rss"></span></a>
    </div></li><li class="main-nav">
                  <a href="../index.html">Home</a>
                </li>
              <li class="main-nav">
                  <a href="git_for_humans.html">Git for humans</a>
                </li>
              <li class="main-nav">
                  <a href="accelerators_and_more.html">Accelerators and more</a>
                </li>
              <li class="main-nav">
                  <a href="scientific_computing_tools.html">Scientific computing tools</a>
                </li>
              <li class="main-nav">
                  <a href="compiler_fun.html">Compiler Fun</a>
                </li>
              <li class="main-nav">
                  <a href="useful_linux.html">Useful Linux commands</a>
                </li>
              <li class="main-nav">
                  <a href="#">Macs and High Performance Computing</a>
                </li>
              <li class="main-nav">
                  <a href="working_with_lcfs.html">Working with LCFs</a>
                </li>
              <li class="main-nav">
                  <a href="useful_vim_ideas.html">Vim ideas</a>
                </li>
              <li class="main-nav">
                  <a href="homebrew_ing.html">Homebrew-ing</a>
                </li>
              <li class="main-nav">
                  <a href="cmake_to_rule_them_all.html">CMake to rule them all</a>
                </li>
              <li class="main-nav">
                  <a href="using_tau_for_your_code.html">Using TAU for your code.</a>
                </li>
              <li class="main-nav">
                  <a href="about_me.html">About me</a>
                </li>
              </ul>
          </nav><div class="main-container" role="main"><div class="main wrapper body clearfix"><article role="article">
    <div class="section" id="macs-and-high-performance-computing">
<h1><a class="toc-backref" href="#id1">Macs and High Performance Computing</a></h1>
<div class="contents topic" id="what-helps-macs-with-hpc">
<p class="topic-title first">What helps Macs with HPC</p>
<ul class="simple">
<li><a class="reference internal" href="#macs-and-high-performance-computing" id="id1">Macs and High Performance Computing</a><ul>
<li><a class="reference internal" href="#macports-does-help" id="id2">Macports does help</a><ul>
<li><a class="reference internal" href="#lion-and-xcode-4-3" id="id3">Lion and Xcode &gt;=4.3</a></li>
<li><a class="reference internal" href="#mountain-lion" id="id4">Mountain Lion</a><ul>
<li><a class="reference internal" href="#xcode-on-mac-os-x" id="id5">Xcode on Mac OS-X</a></li>
</ul>
</li>
<li><a class="reference internal" href="#making-macports-packages-defaults" id="id6">Making macports packages defaults</a></li>
<li><a class="reference internal" href="#macports-openmpi-and-totalview" id="id7">Macports OpenMPI and Totalview</a></li>
</ul>
</li>
<li><a class="reference internal" href="#homebrew-vs-macports" id="id8">Homebrew vs. Macports</a></li>
<li><a class="reference internal" href="#mac-ssd-needing-some-help" id="id9">Mac SSD needing some help</a></li>
<li><a class="reference internal" href="#system-profiling-from-command-line" id="id10">System profiling from command line</a></li>
<li><a class="reference internal" href="#gpus-and-the-macs" id="id11">GPUs and the Macs</a></li>
<li><a class="reference internal" href="#remote-connections" id="id12">Remote Connections</a></li>
<li><a class="reference internal" href="#local-memory-release" id="id13">Local Memory release</a></li>
<li><a class="reference internal" href="#terminal-displaying-remote-hostname" id="id14">Terminal displaying remote hostname</a></li>
<li><a class="reference internal" href="#portland-group-compilers" id="id15">Portland Group Compilers</a><ul>
<li><a class="reference internal" href="#gdb-on-mac-os-x" id="id16">GDB on Mac OS X</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="macports-does-help">
<h2><a class="toc-backref" href="#id2">Macports does help</a></h2>
<p>I like using macports since it really handles package dependencies well.
I have had great sucess with macport&#8217;s built GNU compilers.  I need to
investigate when ports use the LLVM vs. the gcc, but other than that most
things are clear.  This is what I have <a class="reference download internal" href="../_downloads/sv_mp_installed.txt"><span class="xref download docutils literal"><span class="pre">installed</span></span></a>.</p>
<div class="section" id="lion-and-xcode-4-3">
<h3><a class="toc-backref" href="#id3">Lion and Xcode &gt;=4.3</a></h3>
<p>It seems that there are some issues with the new Xcodes being placed only
in the <em>/Applications</em> folder.  After you have installed Xcode and activated the
&#8220;Command Tools&#8221; from the <em>Downloads</em> selection of Xcode&#8217;s preferences, then run</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$xcode</span>-select /Aplications/Xcode
</pre></div>
</div>
<p>I believe that sets where <em>xcodebuild</em> thinks Xcode lives, and now
<a class="reference external" href="https://distfiles.macports.org/MacPorts/MacPorts-2.0.4-10.7-Lion.dmg">Macports for lion</a>
will install.</p>
</div>
<div class="section" id="mountain-lion">
<h3><a class="toc-backref" href="#id4">Mountain Lion</a></h3>
<p>It seems there are lots of issues with Mountain Lion and Macports.  One possible thing to do from the terminal</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$sudo</span> xcodebuild -license
</pre></div>
</div>
<p>may help fix some issues.  Also the above code select may help.</p>
<div class="section" id="xcode-on-mac-os-x">
<h4><a class="toc-backref" href="#id5">Xcode on Mac OS-X</a></h4>
<p>One of the great things about cmake is that it supports multiple GUI development environments,
including Xcode on the Mac, Microsoft Visual Studio on Windows, and KDevelop on Linux (and even on Mac!).</p>
<p>Here&#8217;s how you generate an Xcode project</p>
<div class="highlight-bash"><div class="highlight"><pre>mkdir build_xc <span class="c"># or whatever</span>
<span class="nb">cd </span>build_xc
cmake -G Xcode ../
</pre></div>
</div>
<p>This creates a directory called &lt;projname&gt;.xcodeproj, which you can directly open in xcode, e.g., in the finder or at the command line</p>
<div class="highlight-bash"><div class="highlight"><pre>open &lt;projname&gt;.xcodeproj
</pre></div>
</div>
<p>This knows all about running maketa and everything!</p>
</div>
</div>
<div class="section" id="making-macports-packages-defaults">
<h3><a class="toc-backref" href="#id6">Making macports packages defaults</a></h3>
<p>Most macports built packages have the executables namespaced as
not clash with the system ones.  It is nice to have the option
of making a macports built package default by changing the name.</p>
<div class="highlight-bash"><div class="highlight"><pre>port <span class="k">select</span> --list
Error: port <span class="k">select</span> <span class="o">[</span>--list<span class="p">|</span>--set<span class="p">|</span>--show<span class="o">]</span> &lt;group&gt; <span class="o">[</span>&lt;version&gt;<span class="o">]</span>

port <span class="k">select</span> --list python
Available versions <span class="k">for</span> python:
        none
        python24
        python25
        python25-apple
        python26
        python26-apple
        python27 <span class="o">(</span>active<span class="o">)</span>
        python32
</pre></div>
</div>
</div>
<div class="section" id="macports-openmpi-and-totalview">
<h3><a class="toc-backref" href="#id7">Macports OpenMPI and Totalview</a></h3>
<p>Macports namespaces its OpenMPI commands</p>
<div class="highlight-bash"><div class="highlight"><pre>openmpic++   openmpicxx   openmpif77   openmpirun
openmpicc    openmpiexec  openmpif90
</pre></div>
</div>
<p>so as to not conflict with other mpi implementations.
This can affect your normal use of <em>totalview</em>.  To
use the namespaced mpi commands, you can add a
<em>.tvdrc</em> to your home directory with the following content</p>
<div class="highlight-bash"><div class="highlight"><pre>dset TV::parallel_configs <span class="o">{</span>
   <span class="c">#Macport Open MPI</span>
   name:           Macport Open MPI<span class="p">;</span>
   description:    Macport Open MPI<span class="p">;</span>
   starter:        openmpirun  %s %p %a<span class="p">;</span>
   style:          bootstrap<span class="p">;</span>
   tasks_option:   -np<span class="p">;</span>
   nodes_option:   <span class="p">;</span>
   env_option:     -x<span class="p">;</span>
   env_style:      assign<span class="p">;</span>
   env:            <span class="p">;</span>
   comm_world:     <span class="o">(</span>void *<span class="o">)</span> <span class="p">&amp;</span>ompi_mpi_comm_world<span class="p">;</span>
<span class="c">#    pretest:        ompi_info -c;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The Parallel tab will now have a <em>Macports Open MPI</em> option.</p>
</div>
</div>
<div class="section" id="homebrew-vs-macports">
<h2><a class="toc-backref" href="#id8">Homebrew vs. Macports</a></h2>
<p>I have recently discovered Homebrew as package manager for Mac OS X.  Homebrew tries to fill the void of linux packages,
while also needing the user to download some applications, such as Lyx.</p>
</div>
<div class="section" id="mac-ssd-needing-some-help">
<h2><a class="toc-backref" href="#id9">Mac SSD needing some help</a></h2>
<p>Sometimes it seems that the SSD on my mac has issues.  I noticed that Utilities &gt; Disk repair noted the disc needed
repairs.  To do this I used SuperDuper to clone the drive, then I boot from the clone and ran disk repair.  That did the
trick.  But, I also saw the need may arise to recondition the drive.  This website has useful information on this: <a class="reference external" href="http://macperformanceguide.com/Storage-SSD-Reconditioning.html">http://macperformanceguide.com/Storage-SSD-Reconditioning.html</a></p>
</div>
<div class="section" id="system-profiling-from-command-line">
<h2><a class="toc-backref" href="#id10">System profiling from command line</a></h2>
<p>If you want to know what makes up your machine (from the command line), then <em>system_profile</em> is what to use.:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$system_profile</span> <span class="p">|</span> more
</pre></div>
</div>
<p>should give all the specs of your machine.</p>
</div>
<div class="section" id="gpus-and-the-macs">
<h2><a class="toc-backref" href="#id11">GPUs and the Macs</a></h2>
<p>GP-GPU programming is gaining massive momentum and lots of developers use Macs for the computing power and ease in a
nice, not too heavy case.  Nvidia makes the CUDA toolkit available for free, which will allow for CUDA-C programming on
your mac, as long as it has an NVIDIA GPU graphics card.</p>
</div>
<div class="section" id="remote-connections">
<h2><a class="toc-backref" href="#id12">Remote Connections</a></h2>
<p>I use the native Mac OS X VPN with lots of success.  Sometimes you need to close your lid but want to retain your VPN connection.  A nice built in command is caffeinate:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$caffeinate</span> -u -t 3600
</pre></div>
</div>
<p>Its really nice (man):</p>
<div class="highlight-bash"><div class="highlight"><pre>caffeinate -- prevent the system from sleeping on behalf of a utility
</pre></div>
</div>
<p>This helps.</p>
</div>
<div class="section" id="local-memory-release">
<h2><a class="toc-backref" href="#id13">Local Memory release</a></h2>
<p>To help swipe inactive memory on our mac, try:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$purge</span>
</pre></div>
</div>
<p>where man purge:</p>
<dl class="docutils">
<dt>NAME</dt>
<dd>purge &#8211; force disk cache to be purged (flushed and emptied)</dd>
</dl>
</div>
<div class="section" id="terminal-displaying-remote-hostname">
<h2><a class="toc-backref" href="#id14">Terminal displaying remote hostname</a></h2>
<p>I use so many different machines I have trouble keeping track which terminal window is on which remote machine.  Putting:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">PROMPT_COMMAND</span><span class="o">=</span><span class="s1">&#39;echo -ne &quot;\033]0;${HOSTNAME}: ${PWD/$HOME/~}\007&quot;&#39;</span>
</pre></div>
</div>
<p>in your <em>.bashrc</em> on each machine you log into (including the local one) will put the hostname of the
current window&#8217;s machine in the title bar.</p>
</div>
<div class="section" id="portland-group-compilers">
<h2><a class="toc-backref" href="#id15">Portland Group Compilers</a></h2>
<p>Cool commands</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$pgcpuid</span>
</pre></div>
</div>
<p>and</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$pgaccelinfo</span>
</pre></div>
</div>
<div class="section" id="gdb-on-mac-os-x">
<h3><a class="toc-backref" href="#id16">GDB on Mac OS X</a></h3>
<p>I found this useful for getting GDB to latch onto kernel processes:</p>
<p><a class="reference external" href="http://ntraft.com/installing-gdb-on-os-x-mavericks/">http://ntraft.com/installing-gdb-on-os-x-mavericks/</a></p>
</div>
</div>
</div>

    <div class="postmeta">
        
        
        
        </div>
    </article><aside class="sidebar"><section><div class="widget">
    <h1>Recent Posts</h1>
    <ul><li>
            <a href="../2015/08/19/audiophiles_text_bit_rate_text_sampling_rate_times_text_bit_depth_times_text_number_of_channels_don_t_forget_l_r_channels.html">Audiophiles: :math:`text{Bit rate} = text{sampling rate} times text{bit depth} times text {number of channels} `; Don't forget L,R channels.</a>
        </li><li>
            <a href="../2015/06/01/to_simply_list_all_files_in_a_git_repo_in_conflict_git_config_global_alias_conflicts_diff_name_only_diff_filter_u.html">To simply list all files in a git repo in conflict git config --global alias.conflicts "diff --name-only --diff-filter=U"</a>
        </li><li>
            <a href="../2015/06/01/better_to_use_ssh_config_than_and_alias_in_your_bashrc.html">Better to use ~/.ssh/config than and alias in your .bashrc</a>
        </li><li>
            <a href="../2015/04/27/how_to_get_gdb_working_on_mavericks_http_wiki_lazarus_freepascal_org_gdb_on_os_x_mavericks_and_xcode_5_codesigning_gdb.html"><no title></a>
        </li><li>
            <a href="../2015/01/02/git_push_force_a_savior_at_times.html">git push --force: a savior at times</a>
        </li><li>
            <a href="../2014/12/21/finding_tmux_to_be_quite_useful_and_very_easy_to_install_on_machines.html">Finding tmux to be quite useful and very easy to install on machines.</a>
        </li><li>
            <a href="../2014/12/21/use_http_nickmanderfield_com_2014_08_ultimate_guide_to_fixing_and_resetting_osx_yosemite_launchpad_to_fix_a_yosemite_os_x_broken_launchpad.html">Use http://nickmanderfield.com/2014/08/ultimate-guide-to-fixing-and-resetting-osx-yosemite-launchpad/ to fix a Yosemite OS X broken launchpad.</a>
        </li><li>
            <a href="../2014/01/25/going_to_test_out_pyspread_as_a_possible_performance_recorder.html">Going to test out pyspread as a possible performance recorder</a>
        </li><li>
            <a href="../2013/11/23/unix__screen__is_such_a_great_tool_when_working_on_remote_machines_.html">Unix 'screen' is such a great tool when working on remote machines.</a>
        </li><li>
            <a href="../2013/11/23/readlink__f__filename__to_show_filename_with_full_path.html">readlink -f <filename> to show filename with full path</a>
        </li></ul>
</div>
</section><section><div class="widget" id="searchbox" role="search">
    <h1><a href="#searchbox">Search</a></h1>
    <form action="../search.html" method="get">
        <input type="text" name="q" />
        <button type="submit"><span class="fa fa-search"></span></button>
    </form>
</div></section></aside></div> <!-- #main --></div> <!-- #main-container -->

        <div class="footer-container" role="contentinfo"><footer class="wrapper">&copy; Copyright 2012, Srinath Vadlamani. Powered by <a href="http://www.tinkerer.me/">Tinkerer</a> and <a href="http://sphinx.pocoo.org/">Sphinx</a>.</footer></div> <!-- footer-container -->

      </div> <!--! end of #container --><!--[if lt IE 7 ]>
          <script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
          <script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
        <![endif]-->
    </body>
</html>